buildscript {
	repositories {
		mavenLocal()
		maven {
			credentials {
				username = "${artifactoryUsername}"
				password = "${artifactoryPassword}"
			}
			url "${artifactoryRepoUrl}"
		}
	}
	dependencies {
		classpath(group: 'org.jfrog.buildinfo', name: 'build-info-extractor-gradle', version: '2.0.17')
	}
}

group = 'org.thymeleaf.extras'
version = '1.0.0-SNAPSHOT'

apply plugin: 'java'
apply plugin: 'maven'
apply plugin: 'artifactory'

sourceCompatibility = '1.6'
targetCompatibility = '1.6'

[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

afterEvaluate {
	project.archivesBaseName = 'thymeleaf-extras-togglz'
}

repositories { 
	mavenLocal()
	mavenCentral()
}

dependencies {
	compile "org.thymeleaf:thymeleaf:2.0.21"
	compile "org.togglz:togglz-core:2.0.1.Final"
	testCompile "junit:junit:4.8.2"
	testCompile "org.togglz:togglz-testing:2.0.1.Final"
	testCompile "org.thymeleaf:thymeleaf-testing:2.0.9"
}

artifactory {
	publish {
		contextUrl = "${artifactoryUrl}"
		repository {
			if(project.version.endsWith('-SNAPSHOT')) {
				repoKey = 'pixw-snapshot-local'
			}
			else {
				repoKey = 'pixw-release-local'
			}
			username = "${artifactoryUsername}"
			password = "${artifactoryPassword}"
		}
	}
}
artifactoryPublish.dependsOn 'test'
